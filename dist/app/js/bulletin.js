function pulldownRefresh(){return setTimeout(function(){ajaxData(pageNo,"down"),pageNo++,mui("#pullrefresh").pullRefresh().endPulldownToRefresh()},1500),pageNo}function pullupRefresh(){return setTimeout(function(){mui("#pullrefresh").pullRefresh().endPulldownToRefresh(),ajaxData(pageNo,"up"),pageNo++},1500),pageNo}var myPathConfig=pathConfig,myRootPath=myPathConfig.rootPath,myBullMethod=myPathConfig.bullMethod,ajaxData=function(e,t){function n(n,a,i){var l=document.getElementById("bulletin-list");"down"==t?l.insertBefore(createFragment(n,e),l.firstChild):"up"==t?l.appendChild(createFragment(n,e)):l.appendChild(createFragment(n,e))}function a(){mui("#bulletin-list").on("tap","a",function(e){mui.openWindow({url:this.getAttribute("href"),id:"bulletin",extras:{name:"bulletin",version:"1.0.0"}})})}function i(e,t,n){"timeout"==n?alert("请求超时"):alert("获取数据失败")}$.ajax({url:myRootPath+myBullMethod+e+"&pageNum=5",type:"GET",dataType:"jsonp",jsonp:"callback",async:!1,timeout:3e4,crossDomain:!0,success:n,complete:a,error:i})};mui.ready(function(){ajaxData(1)});var createFragment=function(e,t){var n,a=document.createDocumentFragment();return mui(e.list).each(function(e,t){n=document.createElement("li"),n.className="mui-table-view-cell mui-media news-list",n.innerHTML='<a class="mui-navigate-right" href="bulletin_detail.html?&id='+t.bulletinid+'"><div class="mui-media-body">'+t.title+'<p class="mui-ellipsis">'+timeTranfer(t.time)+"</p></div></a>",a.appendChild(n)}),a};mui.init({pullRefresh:{container:"#pullrefresh",down:{contentdown:"下拉可以刷新",contentover:"释放立即刷新",contentnomore:"没有更多数据了",contentrefresh:"正在加载...",callback:pulldownRefresh}}});var pageNo=2;
//# sourceMappingURL=bulletin.js.map
